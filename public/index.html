<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="styles.css">
    <title>しりとり</title>
</head>
<body>
<h1> しりとり </h1>

<h2> ルール </h2>
<p> しりとりは、前の人が言った単語の最後の文字から始まる単語を言うゲームです。 </p>
<p> 例えば、前の人が「あ」を言った場合、次の人は「あげる」や「あおい」などの単語を言うことができます。 </p>
<p> ただし、同じ単語を二度言うことはできません。 </p>
<p>順番は自由</p>

<h2> ルーム選択 </h2>
<div id="roomSelect">
    //ボタンを押すとそのルームのページに飛ぶ
    <div>
        <button id="room1">ルーム1</button>
        <p id="count1"></p>
    </div>
    <div>
        <button id="room2">ルーム2</button>
        <p id="count2"></p>
    </div>
    <div>
        <button id="room3">ルーム3</button>
        <p id="count3"></p>
    </div>
</div>

<script>
    //ページ読み込み時に同時接続数を表示
    window.onload = () => {
        CountUpdate();
    };

    //ルームボタンを押したときの処理
    const room1 = document.getElementById('room1');
    room1.addEventListener('click', () => {
        location.href = 'room1.html';
    });
    const room2 = document.getElementById('room2');
    room2.addEventListener('click', () => {
        location.href = 'room2.html';
    });
    const room3 = document.getElementById('room3');
    room3.addEventListener('click', () => {
        location.href = 'room3.html';
    });

    //同時接続数の表示
    setInterval(() => {
       CountUpdate();
    }, 2000);

    function CountUpdate() {
        fetch('/room1Count', {method: "GET"})
            .then(response => response.text())
            .then(text => {
                document.getElementById('count1').innerText = text;
            });

        fetch('/room2Count' , {method: "GET"})
            .then(response => response.text())
            .then(text => {
                document.getElementById('count2').innerText = text;
            });

        fetch('/room3Count' , {method: "GET"})
            .then(response => response.text())
            .then(text => {
                document.getElementById('count3').innerText = text;
            });
    }
</script>

</body>
</html>
